{% extends "index.html" %}
{% block content %}
    <!-- informacje o sukcesie lub błędzie -->


<div id="content">
<div id="bar">
    <p>
        {% if error %}
            <strong class="error">Error!: {{ error }}</strong>
        {% endif %}

        {% for message in get_flashed_messages() %}
            <strong class="success">{{ message }}</strong>
        {% endfor %}
    </p>

    <!-- formularz dodawania zadania -->
    <form class="add-form2" method="POST" action="{{ url_for('user', username=g.user.username) }}">
        <label><input class=focus name="task" value=""/></label>
        <label><input class=focus type="datetime-local" data-date-inline-picker="false" data-date-open-on-focus="true" name="date"/></label>
        <label><button class="b1" type="submit"><b>Add Task</b></button></label>
    </form>

    <form id="eraser" method="POST" action="{{ url_for('erase') }}">
        <label><button type="submit" class="b2">Delete<br>Task</button> </label>
    </form>
</div>
<ol>
<!-- wypisujemy kolejno wszystkie zadania -->
{% for i in tasks %}
    <li>
        <table>
            <tbody>
            <tr valign="top">
                <td>
                    <label>
                        <input class="chbx" type="checkbox" name="erase" value="{{ i.id }}" form="eraser">
                    </label>
                </td>
                <!-- wyróznienie zadań zakończonych -->
                <td>
                    {% if i.executed %}
                    <span class="done">
                    {% endif %}

                    {{ i.task }} &nbsp;&nbsp;&nbsp;- <em>{{ i.data_pub }}</em>

                    {% if i.executed %}
                    </span>
                    {% endif %}
                </td>
                <td>
                {% if not i.executed %}
                    <!-- wysyłamy jedynie informacje o id zadania -->
                    <form class="form2" method="POST" action="{{ url_for('executed') }}">
                        <label><input type="hidden" name="execute" value="{{ i.id }}"/></label>
                        <button type="submit" class="b5">Execute!</button>
                    </form>
                {% endif %}
                </td>
            </tr>
            </tbody>
        </table>
    </li>
{% endfor %}
</ol>
</div>
{% endblock %}
